# Alpine-based audio bridge: Loopback (tap) -> Boss DAC
FROM alpine:3.20

# kmod = modprobe; alsa-utils = alsaloop, aplay/arecord for debug
RUN apk add --no-cache kmod alsa-utils


# Simple entrypoint that:
# 1) loads snd-aloop in host kernel
# 2) waits for /proc/asound/Loopback
# 3) runs alsaloop in foreground
COPY entrypoint.sh /usr/local/bin/entrypoint.sh
RUN chmod +x /usr/local/bin/entrypoint.sh

CMD ["/usr/local/bin/entrypoint.sh"]
